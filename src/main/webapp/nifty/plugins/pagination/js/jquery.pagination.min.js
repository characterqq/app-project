(function($,window,document,undefined){var defaults={totalData:0,showData:10,pageCount:7,current:1,prevCls:"prev",nextCls:"next",prevContent:"<",nextContent:">",activeCls:"active",coping:false,homePage:"",endPage:"",count:3,jump:false,jumpIptCls:"jump-ipt",jumpBtnCls:"jump-btn",jumpBtn:"跳转",callback:function(){}};var Pagination=function(element,options){var opts=options,current,$document=$(document),$obj=$(element);this.setTotalPage=function(page){return opts.pageCount=page};this.getTotalPage=function(){var p=opts.totalData||opts.showData?Math.ceil(parseInt(opts.totalData)/opts.showData):opts.pageCount;return p};this.getShowData=function(){return opts.showData};this.getCurrent=function(){return current};this.filling=function(index){var html="";current=index||opts.current;var pageCount=this.getTotalPage();if(current>1){html+='<a href="javascript:;" class="'+opts.prevCls+'">'+opts.prevContent+"</a>"}else{$obj.find("."+opts.prevCls)&&$obj.find("."+opts.prevCls).remove()}if(current>=opts.count*2&&current!=1&&pageCount!=opts.count){var home=opts.coping&&opts.homePage?opts.homePage:"1";html+=opts.coping?'<a href="javascript:;" data-page="1">'+home+"</a><span>...</span>":""}var start=current-opts.count,end=current+opts.count;((start>1&&current<opts.count)||current==1)&&end++;(current>pageCount-opts.count&&current>=pageCount)&&start++;for(;start<=end;start++){if(start<=pageCount&&start>=1){if(start!=current){html+='<a href="javascript:;" data-page="'+start+'">'+start+"</a>"}else{html+='<span class="'+opts.activeCls+'">'+start+"</span>"}}}if(current+opts.count<pageCount&&current>=1&&pageCount>opts.count){var end=opts.coping&&opts.endPage?opts.endPage:pageCount;html+=opts.coping?'<span>...</span><a href="javascript:;" data-page="'+pageCount+'">'+end+"</a>":""}if(current<pageCount){html+='<a href="javascript:;" class="'+opts.nextCls+'">'+opts.nextContent+"</a>"}else{$obj.find("."+opts.nextCls)&&$obj.find("."+opts.nextCls).remove()}html+=opts.jump?'<input type="text" class="'+opts.jumpIptCls+'"><a href="javascript:;" class="'+opts.jumpBtnCls+'">'+opts.jumpBtn+"</a>":"";html+=this.pageData(opts.showData);$obj.empty().html(html)};this.pageData=function(size){var html="";if(size==10){html+='<div class="pull-right" style="height:38px;line-height:38px;color:#777777">每页显示'+"<select><option selected>10</option><option >20</option><option >50</option><option >100</option></select>"+"条，共计"+opts.totalData+"条</div>"}else{if(size==20){html+='<div class="pull-right" style="height:38px;line-height:38px;color:#777777">每页显示'+"<select><option >10</option><option selected>20</option><option >50</option><option >100</option></select>"+"条，共计"+opts.totalData+"条</div>"}else{if(size==50){html+='<div class="pull-right" style="height:38px;line-height:38px;color:#777777">每页显示'+"<select><option >10</option><option >20</option><option selected>50</option><option >100</option></select>"+"条，共计"+opts.totalData+"条</div>"}else{if(size==100){html+='<div class="pull-right" style="height:38px;line-height:38px;color:#777777">每页显示'+"<select><option >10</option><option >20</option><option >50</option><option selected>100</option></select>"+"条，共计"+opts.totalData+"条</div>"}else{html+='<div class="pull-right" style="height:38px;line-height:38px;color:#777777">每页显示'+"<select><option selected>10</option><option >20</option><option >50</option><option >100</option></select>"+"条，共计"+opts.totalData+"条</div>"}}}}return html};this.eventBind=function(){var self=this;var pageCount=this.getTotalPage();$obj.off().on("click","a",function(){if($(this).hasClass(opts.nextCls)){var index=parseInt($obj.find("."+opts.activeCls).text())+1}else{if($(this).hasClass(opts.prevCls)){var index=parseInt($obj.find("."+opts.activeCls).text())-1}else{if($(this).hasClass(opts.jumpBtnCls)){if($obj.find("."+opts.jumpIptCls).val()!==""){var index=parseInt($obj.find("."+opts.jumpIptCls).val())}else{return}}else{var index=parseInt($(this).data("page"))}}}self.filling(index);typeof opts.callback==="function"&&opts.callback(self)});$obj.on("change","select",function(){opts.showData=$(this).val();opts.current=1;var index=parseInt($(this).data("page"));self.filling(index);typeof opts.callback==="function"&&opts.callback(self)});$obj.on("input propertychange","."+opts.jumpIptCls,function(){var $this=$(this);var val=$this.val();var reg=/[^\d]/g;if(reg.test(val)){$this.val(val.replace(reg,""))}(parseInt(val)>pageCount)&&$this.val(pageCount);if(parseInt(val)===0){$this.val(1)}});$document.keydown(function(e){var self=this;if(e.keyCode==13&&$obj.find("."+opts.jumpIptCls).val()){var index=parseInt($obj.find("."+opts.jumpIptCls).val());self.filling(index);typeof opts.callback==="function"&&opts.callback(self)}})};this.init=function(){this.filling(opts.current);this.eventBind()};this.init()};$.fn.pagination=function(parameter,callback){if(typeof parameter=="function"){callback=parameter;parameter={}}else{parameter=parameter||{};callback=callback||function(){}}var options=$.extend({},defaults,parameter);return this.each(function(){var pagination=new Pagination(this,options);callback(pagination)})}})(jQuery,window,document);